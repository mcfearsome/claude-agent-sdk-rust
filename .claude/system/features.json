{
  "version": 1,
  "features": [
    {
      "id": "SDK001",
      "name": "HTTP client foundation",
      "description": "reqwest-based client with API key auth, proper headers (anthropic-version, x-api-key), error types using thiserror",
      "status": "completed",
      "priority": 1,
      "dependencies": [],
      "notes": ["Implemented with reqwest, full error taxonomy, retry-after header parsing"]
    },
    {
      "id": "SDK002",
      "name": "Request/response types",
      "description": "Complete serde models for MessagesRequest, MessagesResponse, Message, Content, Tool, ToolUse, ToolResult. Match official API exactly.",
      "status": "completed",
      "priority": 1,
      "dependencies": [],
      "notes": ["All types implemented with serde, includes prompt caching support, Model registry with 9 models"]
    },
    {
      "id": "SDK003",
      "name": "Non-streaming messages",
      "description": "Implement send_message() for synchronous completion. Parse JSON response, handle errors, return typed MessagesResponse.",
      "status": "completed",
      "priority": 1,
      "dependencies": ["SDK001", "SDK002"],
      "notes": ["Working send_message(), tested with simple_chat example"]
    },
    {
      "id": "SDK004",
      "name": "SSE streaming parser",
      "description": "Parse Server-Sent Events stream using eventsource-stream or custom parser. Handle all event types: message_start, content_block_start, content_block_delta, content_block_stop, message_delta, message_stop.",
      "status": "completed",
      "priority": 2,
      "dependencies": ["SDK001", "SDK002"],
      "notes": ["Implemented with eventsource-stream, handles all event types, proper error handling"]
    },
    {
      "id": "SDK005",
      "name": "Streaming messages API",
      "description": "Implement send_streaming() returning impl Stream<Item = Result<StreamEvent>>. Use tokio streams for async iteration.",
      "status": "completed",
      "priority": 2,
      "dependencies": ["SDK004"],
      "notes": ["Working send_streaming() with Pin<Box<dyn Stream>>, tested with streaming_chat example"]
    },
    {
      "id": "SDK006",
      "name": "Tool use primitives",
      "description": "Types for Tool definition, ToolUse in responses, ToolResult in requests. Support disable_user_input field for programmatic calling.",
      "status": "completed",
      "priority": 2,
      "dependencies": ["SDK002"],
      "notes": ["Tool types implemented in SDK002, runtime support via ConversationBuilder in SDK007"]
    },
    {
      "id": "SDK007",
      "name": "Multi-turn conversation builder",
      "description": "Builder pattern for conversation history management. Handle role alternation (user/assistant), tool use/results, proper message formatting.",
      "status": "completed",
      "priority": 3,
      "dependencies": ["SDK003", "SDK006"],
      "notes": ["ConversationBuilder with system prompts, tools, messages, tool results, caching support"]
    },
    {
      "id": "SDK008",
      "name": "Token counting",
      "description": "Estimate token counts using tiktoken-rs or similar. Needed for context window management (200K tokens for Claude 3.5 Sonnet).",
      "status": "completed",
      "priority": 3,
      "dependencies": ["SDK002"],
      "notes": [
        "TokenCounter using tiktoken-rs with cl100k_base tokenizer",
        "count_text(), count_message(), count_content_block()",
        "count_system_prompt(), count_tool(), count_request()",
        "validate_context_window() with extended context support",
        "ConversationBuilder.estimate_tokens() and fits_in_context()",
        "7 new tests for token counting (50 total unit tests)",
        "Accurate estimates for context window management"
      ]
    },
    {
      "id": "SDK009",
      "name": "Error handling taxonomy",
      "description": "Comprehensive error types: APIError (4xx/5xx), NetworkError, ParseError, RateLimitError (with retry-after). Use thiserror for library errors.",
      "status": "completed",
      "priority": 2,
      "dependencies": ["SDK001"],
      "notes": ["Complete error taxonomy with thiserror, is_retryable() and retry_after() helpers"]
    },
    {
      "id": "SDK010",
      "name": "Retry logic with backoff",
      "description": "Implement exponential backoff for rate limits (429) and server errors (5xx). Respect retry-after headers. Use tokio::time::sleep.",
      "status": "completed",
      "priority": 3,
      "dependencies": ["SDK009"],
      "notes": ["RetryConfig with exponential backoff, retry_with_backoff(), send_message_with_retry(), respects retry-after headers"]
    },
    {
      "id": "SDK011",
      "name": "Examples and integration tests",
      "description": "Example binaries: simple chat, streaming chat, tool use, multi-turn conversation. Integration tests against real API (gated by env var).",
      "status": "new",
      "priority": 4,
      "dependencies": ["SDK005", "SDK007"],
      "notes": []
    },
    {
      "id": "SDK012",
      "name": "Documentation and publishing",
      "description": "README with quickstart, API docs with examples, publish to crates.io as 'claude-sdk' or 'anthropic-sdk-rust'.",
      "status": "new",
      "priority": 4,
      "dependencies": ["SDK011"],
      "notes": []
    },
    {
      "id": "SDK013",
      "name": "Prompt caching support",
      "description": "Support API prompt caching via cache_control blocks. Reduces costs by caching system prompts, tool definitions, and long context. Add CacheControl type, support in Message content.",
      "status": "completed",
      "priority": 2,
      "dependencies": ["SDK002", "SDK006"],
      "notes": [
        "CacheControl and CacheType enums implemented",
        "cache_control fields in ContentBlock, SystemBlock, Tool",
        "ConversationBuilder.with_cached_system() and with_cached_tool()",
        "Usage tracking: cache_creation_input_tokens, cache_read_input_tokens",
        "prompt_caching example demonstrates 90% cost reduction",
        "7 new tests for caching serialization"
      ]
    },
    {
      "id": "SDK014",
      "name": "Amazon Bedrock support",
      "description": "Support Claude models via AWS Bedrock. Implement AWS SigV4 signing, bedrock-runtime endpoint, handle different request/response envelope format.",
      "status": "completed",
      "priority": 3,
      "dependencies": ["SDK003", "SDK005"],
      "notes": [
        "ClaudeBackend enum with Anthropic and Bedrock variants",
        "bedrock() constructor with AWS credential loading (AWS SDK 1.x)",
        "Uses aws-sdk-bedrockruntime high-level client (simpler than manual signing)",
        "Automatic model ID conversion (Anthropic â†’ Bedrock format)",
        "Non-streaming API fully working with invoke_model()",
        "Streaming API fully working with invoke_model_with_response_stream()",
        "Uses async-stream crate to convert EventReceiver to Stream",
        "Tested with AWS SDK 1.x (stable), works with all Bedrock model IDs",
        "Unified client interface - same API for both backends",
        "Both streaming and non-streaming work identically across backends"
      ]
    },
    {
      "id": "SDK015",
      "name": "Interactive REPL",
      "description": "Build interactive REPL binary for testing and debugging. Features: multi-turn chat, tool execution preview, streaming display, conversation save/load, token counting display.",
      "status": "new",
      "priority": 4,
      "dependencies": ["SDK005", "SDK007", "SDK013"],
      "notes": [
        "Separate binary: src/bin/claude-repl.rs",
        "Use rustyline for readline functionality",
        "Display streaming responses in real-time",
        "Show token usage and costs",
        "Save conversations to JSON",
        "Test tool calls interactively",
        "Useful for SDK demos and debugging"
      ]
    },
    {
      "id": "SDK016",
      "name": "Documentation and publishing",
      "description": "README with quickstart, API docs with examples, publish to crates.io as 'claude-sdk' or 'anthropic-sdk-rust'.",
      "status": "new",
      "priority": 5,
      "dependencies": ["SDK011", "SDK014", "SDK015"],
      "notes": []
    },
    {
      "id": "SDK017",
      "name": "CI/CD Pipeline",
      "description": "GitHub Actions workflows for testing, building, and publishing. Includes: cargo test, cargo clippy, cargo fmt check, automated crates.io publishing on release tags.",
      "status": "completed",
      "priority": 3,
      "dependencies": ["SDK003", "SDK005"],
      "notes": [
        "Workflow 1: PR checks (test, clippy, fmt) - .github/workflows/ci.yml",
        "Workflow 2: Release automation (publish to crates.io) - .github/workflows/release.yml",
        "Workflow 3: Upstream SDK monitoring (weekly check for new models) - .github/workflows/upstream-check.yml",
        "RELEASE.md documents complete release process with version bumping",
        "CHANGELOG.md created following Keep a Changelog format"
      ]
    }
  ]
}
