{
  "version": 1,
  "description": "Future features for Claude SDK - Advanced API capabilities",
  "features": [
    {
      "id": "SDK018",
      "name": "Extended Thinking Support",
      "description": "Support for Claude's extended thinking feature where the model shows its reasoning process. Requires anthropic-beta: thinking-2025-12-05 header.",
      "priority": 2,
      "status": "planned",
      "dependencies": ["SDK005"],
      "notes": [
        "Add thinking content blocks in streaming responses",
        "Track thinking tokens separately in usage",
        "Add enable_thinking field to MessagesRequest",
        "Example showing reasoning process visualization"
      ]
    },
    {
      "id": "SDK019",
      "name": "Vision Support (Images)",
      "description": "Support for image inputs in messages. Claude 4.5+ models support vision.",
      "priority": 2,
      "status": "planned",
      "dependencies": ["SDK002"],
      "notes": [
        "Add Image content block type",
        "Support base64 encoded images",
        "Support image URLs",
        "Add image source types (base64, url)",
        "Media types: image/jpeg, image/png, image/gif, image/webp",
        "Example with image analysis"
      ]
    },
    {
      "id": "SDK020",
      "name": "Structured Outputs (JSON Schema)",
      "description": "Force Claude to return structured JSON matching a schema. Uses tool_choice parameter.",
      "priority": 3,
      "status": "planned",
      "dependencies": ["SDK006"],
      "notes": [
        "Add tool_choice field to MessagesRequest",
        "Support tool_choice: {type: 'tool', name: 'tool_name'}",
        "Support tool_choice: {type: 'any'} and {type: 'auto'}",
        "Example showing forced JSON output",
        "Useful for data extraction, form filling"
      ]
    },
    {
      "id": "SDK021",
      "name": "Batch API Support",
      "description": "Support for Claude's batch API for processing multiple requests asynchronously at 50% cost.",
      "priority": 3,
      "status": "planned",
      "dependencies": ["SDK001"],
      "notes": [
        "New endpoint: POST /v1/messages/batches",
        "Batch creation, status checking, result retrieval",
        "24-hour processing window",
        "50% discount on batch requests",
        "Separate BatchClient or add to ClaudeClient",
        "Example showing batch job creation and polling"
      ]
    },
    {
      "id": "SDK022",
      "name": "PDF Support",
      "description": "Support for PDF document analysis via vision API. Extract text, analyze layout, answer questions about PDFs.",
      "priority": 4,
      "status": "planned",
      "dependencies": ["SDK019"],
      "notes": [
        "Convert PDF pages to images",
        "Use pdf-rs or similar for rendering",
        "Send as image content blocks",
        "Helper: send_pdf_message(pdf_path, question)",
        "Example: PDF invoice extraction"
      ]
    },
    {
      "id": "SDK023",
      "name": "Embeddings Support",
      "description": "Support for Anthropic's embeddings API (if/when released). Currently not available.",
      "priority": 5,
      "status": "blocked",
      "dependencies": [],
      "notes": [
        "BLOCKED: Anthropic doesn't have embeddings API yet",
        "Use Voyage AI or similar in meantime",
        "Add when Anthropic releases embeddings"
      ]
    },
    {
      "id": "SDK024",
      "name": "Context Editing / Prompt Stitching",
      "description": "Helper utilities for managing large context: truncation, summarization, sliding windows.",
      "priority": 3,
      "status": "planned",
      "dependencies": ["SDK008"],
      "notes": [
        "ConversationBuilder.with_context_limit(tokens)",
        "Auto-truncate old messages when limit reached",
        "Summarize old context before truncating (optional)",
        "Sliding window with overlap",
        "Requires token counting (SDK008) to be accurate"
      ]
    },
    {
      "id": "SDK025",
      "name": "Citations and Sources",
      "description": "Parse and track citations when Claude references sources. Useful for RAG applications.",
      "priority": 4,
      "status": "planned",
      "dependencies": ["SDK007"],
      "notes": [
        "Define citation format in system prompt",
        "Parse [source: X] or similar patterns",
        "Track which tools/documents influenced response",
        "Helper utilities for citation extraction",
        "Example: RAG with citation tracking"
      ]
    },
    {
      "id": "SDK026",
      "name": "Files API Support",
      "description": "Support for Claude's file upload API (if/when released). Currently not available via API.",
      "priority": 5,
      "status": "blocked",
      "dependencies": [],
      "notes": [
        "BLOCKED: File uploads only available in web UI currently",
        "Would enable: Upload files, reference in conversation",
        "Monitor: https://docs.anthropic.com/en/api for file API",
        "Add when API becomes available"
      ]
    },
    {
      "id": "SDK027",
      "name": "Multilingual Optimization",
      "description": "Helpers for multilingual conversations: language detection, translation requests, locale handling.",
      "priority": 4,
      "status": "planned",
      "dependencies": ["SDK007"],
      "notes": [
        "Claude already supports all major languages",
        "Add helper: ConversationBuilder.with_language(locale)",
        "Add to system prompt: 'Respond in {language}'",
        "Example: Multi-language customer support bot",
        "No new API features needed, just conveniences"
      ]
    },
    {
      "id": "SDK028",
      "name": "Effort Parameter Support",
      "description": "Support for effort parameter to control thinking depth (if/when available).",
      "priority": 4,
      "status": "blocked",
      "dependencies": [],
      "notes": [
        "BLOCKED: Not in current API",
        "Monitor API changelog for effort parameter",
        "Would allow: Low/medium/high thinking effort",
        "Trade-off: Speed vs quality"
      ]
    },
    {
      "id": "SDK029",
      "name": "MCP (Model Context Protocol) Integration",
      "description": "Integration layer for MCP servers to provide tools and context to Claude. MCP is a protocol for connecting AI apps to external data sources.",
      "priority": 3,
      "status": "planned",
      "dependencies": ["SDK006", "SDK007"],
      "notes": [
        "MCP is separate from Claude SDK - it provides tools/data sources",
        "Integration approach: MCP server → Tool definitions → Claude SDK",
        "Create mcp module with McpTool trait",
        "Auto-convert MCP tools to Claude Tool format",
        "Handle MCP tool execution and result formatting",
        "Support stdio, SSE, and HTTP MCP transports",
        "Example: Connect to MCP filesystem server, use tools in conversation",
        "Colony Shell will heavily use this integration"
      ]
    }
  ],
  "mcp_integration_strategy": {
    "architecture": "Adapter pattern - MCP provides tools, SDK calls Claude",
    "layers": [
      "1. MCP Client (connects to MCP servers)",
      "2. Tool Adapter (converts MCP tools → Claude Tools)",
      "3. Execution Bridge (executes MCP tool calls)",
      "4. Claude SDK (sends requests with tools to Claude)"
    ],
    "implementation_plan": [
      "Phase 1: Define McpTool trait and conversion logic",
      "Phase 2: Implement MCP client (stdio, SSE, HTTP transports)",
      "Phase 3: Auto-execute MCP tools when Claude requests them",
      "Phase 4: Examples with popular MCP servers (filesystem, fetch, etc.)"
    ],
    "design_notes": [
      "MCP is NOT part of Claude API - it's an integration layer",
      "SDK should not depend on MCP - keep as optional feature",
      "Use feature flag: mcp = ['mcp-client-crate']",
      "Tool execution can be automatic or manual (user choice)",
      "Colony Shell will use SDK + MCP integration for agentic workflows"
    ]
  },

  "implementation_notes": {
    "immediate_priority": [
      "SDK019 (Vision) - Models already support it",
      "SDK020 (Structured outputs) - tool_choice parameter",
      "SDK018 (Extended thinking) - Available with beta header"
    ],
    "medium_priority": [
      "SDK021 (Batch API) - Good for cost reduction",
      "SDK024 (Context editing) - Needs SDK008 first"
    ],
    "blocked_on_api": [
      "SDK023 (Embeddings) - Anthropic doesn't offer yet",
      "SDK026 (Files API) - Not available via API",
      "SDK028 (Effort parameter) - Not in API yet"
    ],
    "nice_to_have": [
      "SDK022 (PDF) - Can build on vision",
      "SDK025 (Citations) - Application-level pattern",
      "SDK027 (Multilingual) - Just conveniences"
    ]
  }
}
